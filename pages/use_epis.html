<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConfiSafe - Monitoramento de EPIs</title>
    <link rel="stylesheet" href="../css/use_epis.css">
    </head>
<body>

    <header class="navbar">
        <div class="logo">
            <span class="conf">Confi</span><span class="safe">Safe</span>
        </div>
        <nav class="menu">
            <a href="../pages/inicial.html">In√≠cio</a>
            <a href="#">Configura√ß√µes</a>
            <a href="../pages/login.html" class="login-btn">Sair</a>
        </nav>
    </header>

    <div class="layout">

        <aside class="sidebar">
            <div class="user-profile">
                <img src="../assets/img/controle.png" alt="Foto do Funcion√°rio" id="userPhoto">
                <h3 id="userName">Michael Coutinho</h3>
                <p id="userRole">Supervisor de Seguran√ßa</p>
            </div>

            <nav class="sidebar-menu" aria-label="Menu principal">
                <a href="../pages/inicial.html" class="menu-item">
                    <img src="../img/dashboard.png" alt="" aria-hidden="true"> 
                    <span>Painel Geral</span>
                </a>
                <a href="../pages/controle-acesso.html" class="menu-item">
                    <img src="../img/capacete.png" alt="" aria-hidden="true"> 
                    <span>Controle de Acesso</span>
                </a>
                <a href="../pages/epis.html" class="menu-item active">
                    <img src="../img/luvas.png" alt="" aria-hidden="true"> 
                    <span>Monitoramento de EPIs</span>
                </a>
                <a href="../pages/monitoramento.html" class="menu-item">
                    <img src="../icons/camera-cftv.png" alt="" aria-hidden="true"> 
                    <span>Monitoramento</span>
                </a>
                <a href="../pages/treinamentos.html" class="menu-item">
                    <img src="../img/colete.png" alt="" aria-hidden="true"> 
                    <span>Treinamentos</span>
                </a>
                <a href="../pages/relatorio.html" class="menu-item">
                    <img src="../img/relatorio.png" alt="" aria-hidden="true"> 
                    <span>Relat√≥rios</span>
                </a>
            </nav>
        </aside>

        <main class="main-content" id="main-content">
            
            <header class="page-header">
                <h1>Monitoramento de EPIs</h1>
                <p class="page-description">Acompanhe em tempo real o uso de Equipamentos de Prote√ß√£o Individual pela equipe</p>
                
                <nav class="breadcrumb" aria-label="Navega√ß√£o estrutural">
                    <ol>
                        <li><a href="../pages/inicial.html">Painel</a></li>
                        <li><span aria-current="page">Monitoramento de EPIs</span></li>
                    </ol>
                </nav>
            </header>

            <section class="critical-alerts">
                <div class="alert-banner alert-high">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-content">
                        <h3>Alertas de N√£o Conformidade</h3>
                        <p><strong>3 funcion√°rios</strong> detectados sem EPI adequado em √°reas de risco</p>
                        <div class="alert-details">
                            <span>‚è∞ √öltima ocorr√™ncia: H√° 15 minutos</span>
                            <span>üìç Setor: Manuten√ß√£o</span>
                        </div>
                    </div>
                    <button class="alert-action" onclick="EPIActions.viewAlerts()">Ver Detalhes</button>
                </div>
            </section>

            <section class="compliance-dashboard">
                <div class="dashboard-header">
                    <h2>Dashboard de Conformidade</h2>
                    <div class="dashboard-filters">
                        <select class="filter-select" onchange="EPIActions.filterByArea(this.value)">
                            <option value="all">Todas as √Åreas</option>
                            <option value="production">Produ√ß√£o</option>
                            <option value="maintenance">Manuten√ß√£o</option>
                            <option value="laboratory">Laborat√≥rio</option>
                        </select>
                        <select class="filter-select" onchange="EPIActions.filterByShift(this.value)">
                            <option value="all">Todos os Turnos</option>
                            <option value="morning">Manh√£</option>
                            <option value="afternoon">Tarde</option>
                            <option value="night">Noite</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <span class="stat-number">94%</span>
                            <span class="stat-label">Taxa de Conformidade Geral</span>
                            <span class="stat-trend positive">+2% em rela√ß√£o √† semana anterior</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <span class="stat-number">156</span>
                            <span class="stat-label">Funcion√°rios Monitorados</span>
                            <span class="stat-trend">45 ativos agora</span>
                        </div>
                    </div>
                    
                    <div class="stat-card warning">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <span class="stat-number">8</span>
                            <span class="stat-label">N√£o Conformidades Hoje</span>
                            <span class="stat-trend negative">+3 em rela√ß√£o a ontem</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <span class="stat-number">42</span>
                            <span class="stat-label">Verifica√ß√µes Realizadas</span>
                            <span class="stat-trend positive">√öltima: 10:25 AM</span>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">Conformidade M√©dia por Turno (√öltimas 24h)</h3>
                    <div id="compliance-chart" style="height: 300px;">
                        <img src="https://via.placeholder.com/600x300/f8f8f8/333333?text=Gr%C3%A1fico+de+Conformidade+por+Turno" alt="Gr√°fico de Conformidade por Turno" style="width:100%; height:100%; object-fit:contain; border-radius:8px;">
                        </div>
                </div>
            </section>

            <section class="real-time-monitoring">
                <div class="section-header">
                    <h2>Monitoramento em Tempo Real</h2>
                    <div class="section-actions">
                        <button class="btn-secondary" onclick="EPIActions.exportData()">
                            üì• Exportar Relat√≥rio
                        </button>
                        <button class="btn-primary" onclick="EPIActions.refreshData()">
                            üîÑ Atualizar Dados
                        </button>
                    </div>
                </div>

                <div class="monitoring-tabs">
                    <button class="tab-button active" onclick="EPIActions.switchTab('employees')">
                        üë• Por Funcion√°rio
                    </button>
                    <button class="tab-button" onclick="EPIActions.switchTab('areas')">
                        üè≠ Por √Årea
                    </button>
                    <button class="tab-button" onclick="EPIActions.switchTab('live')">
                        üî¥ LIVE: Mapa de Risco
                    </button>
                </div>

                <div class="tab-content active" id="employees-tab">
                    <div class="monitoring-table-container">
                        <table class="monitoring-table">
                            <thead>
                                <tr>
                                    <th>Funcion√°rio</th>
                                    <th>√Årea</th>
                                    <th>Capacete</th>
                                    <th>√ìculos</th>
                                    <th>Luvas</th>
                                    <th>M√°scara</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="compliant">
                                    <td>
                                        <div class="employee-info">
                                            <div class="avatar">JS</div>
                                            <div>
                                                <strong>Jo√£o Silva</strong>
                                                <span>Operador</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Produ√ß√£o</td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="compliance-status compliant">Conforme</span></td>
                                    <td>
                                        <button class="btn-icon" title="Ver detalhes" onclick="EPIActions.viewEmployeeDetails(1)">
                                            üëÅÔ∏è
                                        </button>
                                    </td>
                                </tr>
                                
                                <tr class="non-compliant">
                                    <td>
                                        <div class="employee-info">
                                            <div class="avatar">MS</div>
                                            <div>
                                                <strong>Maria Santos</strong>
                                                <span>T√©cnica</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Laborat√≥rio</td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge non-compliant">‚ùå</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="compliance-status non-compliant">N√£o Conforme</span></td>
                                    <td>
                                        <button class="btn-icon warning" title="Notificar" onclick="EPIActions.notifyEmployee(2)">
                                            üì¢
                                        </button>
                                        <button class="btn-icon" title="Ver detalhes" onclick="EPIActions.viewEmployeeDetails(2)">
                                            üëÅÔ∏è
                                        </button>
                                    </td>
                                </tr>
                                
                                <tr class="non-compliant critical">
                                    <td>
                                        <div class="employee-info">
                                            <div class="avatar">CO</div>
                                            <div>
                                                <strong>Carlos Oliveira</strong>
                                                <span>Manuten√ß√£o</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Manuten√ß√£o</td>
                                    <td><span class="status-badge non-compliant">‚ùå</span></td>
                                    <td><span class="status-badge non-compliant">‚ùå</span></td>
                                    <td><span class="status-badge compliant">‚úÖ</span></td>
                                    <td><span class="status-badge non-compliant">‚ùå</span></td>
                                    <td><span class="compliance-status critical">Cr√≠tico</span></td>
                                    <td>
                                        <button class="btn-icon danger" title="Bloquear Acesso" onclick="EPIActions.blockAccess(3)">
                                            üö´
                                        </button>
                                        <button class="btn-icon warning" title="Notificar" onclick="EPIActions.notifyEmployee(3)">
                                            üì¢
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- <div class="tab-content" id="areas-tab">
                    <p>Conte√∫do de monitoramento por √°rea viria aqui...</p>
                </div> -->

                <div class="tab-content" id="live-tab">
                    <div class="live-view-container">
                        <div class="live-header">
                            <h3>√Årea Cr√≠tica - Manuten√ß√£o (LIVE)</h3>
                            <span class="live-indicator">üî¥ AO VIVO</span>
                        </div>
                        
                        <div class="live-feed-placeholder">
                            <img src="../assets/img/camera_seguran√ßa.jpg" alt="Visualiza√ß√£o em tempo real">
                            <div class="non-compliance-overlay">
                                üö® Alerta Ativo: Carlos Oliveira (Sem Capacete)
                            </div>
                        </div>
                    </div>
                </div>
                
            </section>

            <section class="area-statistics">
                <div class="section-header">
                    <h2>Estat√≠sticas por √Årea</h2>
                    <div class="view-options">
                        <button class="view-option active" onclick="EPIActions.changeView('cards')">
                            üé¥ Visualiza√ß√£o em Cards
                        </button>
                        <button class="view-option" onclick="EPIActions.changeView('chart')">
                            üìä Visualiza√ß√£o em Gr√°fico
                        </button>
                    </div>
                </div>

                <div class="area-cards">
                    <div class="area-card">
                        <h3>Setor de Produ√ß√£o</h3>
                        <div class="area-stats">
                            <div class="stat">
                                <span class="stat-value">96%</span>
                                <span class="stat-label">Conformidade</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">45</span>
                                <span class="stat-label">Funcion√°rios</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">2</span>
                                <span class="stat-label">Alertas</span>
                            </div>
                        </div>
                        <div class="compliance-breakdown">
                            <div class="epi-compliance">
                                <span>Capacete: 98%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill" style="width: 98%"></div>
                                </div>
                            </div>
                            <div class="epi-compliance">
                                <span>√ìculos: 94%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill" style="width: 94%"></div>
                                </div>
                            </div>
                            <div class="epi-compliance">
                                <span>Luvas: 97%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill" style="width: 97%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="area-card warning">
                        <h3>√Årea de Manuten√ß√£o</h3>
                        <div class="area-stats">
                            <div class="stat">
                                <span class="stat-value">82%</span>
                                <span class="stat-label">Conformidade</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">32</span>
                                <span class="stat-label">Funcion√°rios</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">5</span>
                                <span class="stat-label">Alertas</span>
                            </div>
                        </div>
                        <div class="compliance-breakdown">
                            <div class="epi-compliance">
                                <span>Capacete: 85%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill warning" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="epi-compliance">
                                <span>√ìculos: 78%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill warning" style="width: 78%"></div>
                                </div>
                            </div>
                            <div class="epi-compliance">
                                <span>Luvas: 83%</span>
                                <div class="compliance-bar">
                                    <div class="compliance-fill warning" style="width: 83%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="alerts-history">
                <div class="section-header">
                    <h2>Hist√≥rico de Alertas Recentes</h2>
                    <button class="btn-secondary" onclick="EPIActions.clearAlerts()">
                        üóëÔ∏è Limpar Alertas Resolvidos
                    </button>
                </div>

                <div class="alerts-list">
                    <div class="alert-item critical">
                        <div class="alert-icon">üö´</div>
                        <div class="alert-content">
                            <h3>EPI Cr√≠tico Ausente</h3>
                            <p><strong>Carlos Oliveira</strong> detectado sem capacete na √°rea de alta tens√£o</p>
                            <div class="alert-meta">
                                <span>‚è∞ H√° 15 minutos</span>
                                <span>üìç Setor de Manuten√ß√£o</span>
                                <span>üÜî ID: ALT-001</span>
                            </div>
                        </div>
                        <div class="alert-actions">
                            <button class="btn-danger" onclick="EPIActions.blockAccess(3)">
                                Bloquear Acesso
                            </button>
                            <button class="btn-primary" onclick="EPIActions.resolveAlert(1)">
                                Marcar como Resolvido
                            </button>
                        </div>
                    </div>

                    <div class="alert-item warning">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div class="alert-content">
                            <h3>Uso Incorreto de EPI</h3>
                            <p><strong>Maria Santos</strong> usando m√°scara de forma inadequada</p>
                            <div class="alert-meta">
                                <span>‚è∞ H√° 45 minutos</span>
                                <span>üìç Laborat√≥rio Qu√≠mico</span>
                                <span>üÜî ID: ALT-002</span>
                            </div>
                        </div>
                        <div class="alert-actions">
                            <button class="btn-warning" onclick="EPIActions.notifyEmployee(2)">
                                Enviar Notifica√ß√£o
                            </button>
                            <button class="btn-primary" onclick="EPIActions.resolveAlert(2)">
                                Marcar como Resolvido
                            </button>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2025 ConfiSafe - Sistema de Monitoramento de EPIs</p>
        </div>
    </footer>

    <script src="../js/use_epis.js"></script>
    
</body>
</html>